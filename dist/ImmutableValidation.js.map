{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 48830660676659976aad","webpack:///./src/index.js","webpack:///./src/Validator.js","webpack:///external {\"root\":\"Immutable\",\"commonjs2\":\"immutable\",\"commonjs\":\"immutable\",\"amd\":\"immutable\"}","webpack:///./src/util.js","webpack:///./src/ValidatorWrapper.js","webpack:///./src/rule.js","webpack:///./src/predicates.js"],"names":[],"mappings":"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","file":"ImmutableValidation.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"immutable\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ImmutableValidation\"] = factory(require(\"immutable\"));\n\telse\n\t\troot[\"ImmutableValidation\"] = factory(root[\"Immutable\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 48830660676659976aad\n **/","import * as predicates from './predicates';\r\n\r\nexport { default as Validator } from './Validator';\r\nexport { predicates };\r\nexport { default as rule } from './rule';\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import Imm from 'immutable';\r\nimport { isFunction, isIterable, hasProp } from './util';\r\nimport ValidatorWrapper from './ValidatorWrapper';\r\n\r\nconst SELF = 'self';\r\n\r\nfunction buildRuleReducer (dataToValidate) {\r\n    return (messagesForProp, rule) => {\r\n        const { isValid, message } = runRule(rule, dataToValidate);\r\n\r\n        if (!isValid) {\r\n            return messagesForProp.add(message);\r\n        }\r\n\r\n        return messagesForProp;\r\n    }\r\n}\r\n\r\nfunction resultReducer (isValid, [ , prop ]) {\r\n    if (isValid === false) return false;\r\n    if (prop.has('isValid')) return prop.get('isValid');\r\n    if (prop.has(SELF) && prop.get(SELF).count()) return false;\r\n    return prop.entrySeq()\r\n        .filter(([ key ]) => key !== 'isValid' && key !== SELF)\r\n        .reduce(resultReducer, isValid);\r\n}\r\n\r\nfunction runRule (rule, val) {\r\n    const result = rule(val);\r\n    if (!hasProp(result, 'isValid') || !hasProp(result, 'message')) {\r\n        throw new Error('Rules must return a result with the properties `isValid` and `message`. Use ImmutableValidation.rule()');\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction iterableAccessor (propName, accessor, data) {\r\n    const iter = accessor(data);\r\n\r\n    if (!isIterable(iter)) {\r\n        throw new TypeError(`\\`${propName}\\` is a non-iterable value. ruleForEach applies a validation rule to each item in an iterable`);               \r\n    }\r\n\r\n    return iter;\r\n}\r\n\r\nfunction setMerged (vState, propName, newData) {\r\n    if (vState.has(propName)) {\r\n        newData = vState.get(propName).merge(newData);\r\n    }\r\n\r\n    return vState.set(propName, Imm.Map(newData));\r\n}\r\n\r\nfunction buildRuleSet (propName, accessor, rules) {\r\n    return (data, vState) => {\r\n        const existing = vState.getIn([ propName, SELF ]) || Imm.Set();\r\n        const ruleReducer = buildRuleReducer(accessor(data));\r\n        const messages = rules.reduce(ruleReducer, existing);\r\n        return vState.set(propName, Imm.Map({ [SELF]: messages }));\r\n    }\r\n}\r\n\r\nfunction buildRuleSetForValidator (propName, accessor, validator) {\r\n    return (data, vState) => {\r\n        const val = accessor(data);\r\n        const validatorResult = validator.validate(val);\r\n        return setMerged(vState, propName, validatorResult);\r\n    }\r\n}\r\n\r\nfunction buildRuleSetForEachValidator (propName, accessor, validator) {\r\n    return (data, vState) => {\r\n        const iter = iterableAccessor(propName, accessor, data);\r\n\r\n        const resultMap = iter.reduce((results, item, i) => {\r\n            const validatorResult = validator.validate(item);\r\n            return results.set(i, validatorResult);\r\n        }, Imm.Map());\r\n\r\n        return setMerged(vState, propName, resultMap);\r\n    }\r\n}\r\n\r\nfunction buildRuleSetForEachItem (propName, accessor, rules) {\r\n    return (data, vState) => {\r\n        const iter = iterableAccessor(propName, accessor, data);\r\n\r\n        const resultMap = iter.reduce((results, item, i) => {\r\n            const ruleReducer = buildRuleReducer(item);\r\n            const itemResult = rules.reduce(ruleReducer, Imm.Set());\r\n            return results.set(i, Imm.Map({ [SELF]: itemResult }));\r\n        }, Imm.Map())\r\n\r\n        return setMerged(vState, propName, resultMap);\r\n    }\r\n}\r\n\r\nfunction extendRuleSets (baseValidator, ruleSet) {\r\n    const extendedValidator = new Validator();\r\n    extendedValidator.ruleSets = baseValidator.ruleSets.concat(ruleSet);\r\n    return extendedValidator;\r\n}\r\n\r\nclass Validator {\r\n    constructor () {\r\n        this.ruleSets = [];\r\n        this.validationState = Imm.Map({\r\n            isValid: true\r\n        });\r\n    }\r\n\r\n    ruleFor (propName, accessor, ...rules) {\r\n        const ruleSet = (Validator.isInstance(rules[0]))\r\n            ? buildRuleSetForValidator(propName, accessor, rules[0])\r\n            : buildRuleSet(propName, accessor, rules);\r\n\r\n        return extendRuleSets(this, ruleSet);\r\n    }\r\n\r\n    ruleForEach (propName, accessor, ...rules) {\r\n        const ruleSet = (Validator.isInstance(rules[0]))\r\n            ? buildRuleSetForEachValidator(propName, accessor, rules[0])\r\n            : buildRuleSetForEachItem(propName, accessor, rules);\r\n\r\n        return extendRuleSets(this, ruleSet);\r\n    }\r\n\r\n    validate (dataToValidate) {\r\n        const newVState = this.ruleSets.reduce((messages, ruleSet) =>\r\n            ruleSet(dataToValidate, messages), Imm.Map());\r\n\r\n        const isValid = newVState.entrySeq()\r\n            .filter(([ key ]) => key !== 'isValid')\r\n            .reduce(resultReducer, true);\r\n\r\n        this.validationState = newVState.set('isValid', isValid);\r\n\r\n        return this.validationState;\r\n    }\r\n\r\n    static isInstance (obj) {\r\n        if (!obj) return false;\r\n        return (isFunction(obj.validate));\r\n    }\r\n\r\n    static which (chooseValidator) {\r\n        if (!isFunction(chooseValidator)) {\r\n            throw new TypeError('Call Validator.which with a function returning a validator or null');\r\n        }\r\n\r\n        return new ValidatorWrapper(chooseValidator);\r\n    }\r\n}\r\n\r\nexport default Validator;\n\n\n/** WEBPACK FOOTER **\n ** ./src/Validator.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"Immutable\",\"commonjs2\":\"immutable\",\"commonjs\":\"immutable\",\"amd\":\"immutable\"}\n ** module id = 2\n ** module chunks = 0\n **/","export function identity (x) {\r\n    return x;\r\n}\r\n\r\nexport function noop () {\r\n    return undefined;\r\n}\r\n\r\nexport function toType (obj) {\r\n    // IE requires some special-case handling, otherwise returns 'object' for both of the below\r\n    if (obj === null) return 'null';\r\n    if (obj === undefined) return 'undefined';\r\n    // Angus Croll (http://javascriptweblog.wordpress.com/2011/08/08/fixing-the-javascript-typeof-operator)\r\n    return ({}).toString.call(obj).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();\r\n}\r\n\r\nexport function isFunction (obj) {\r\n    return toType(obj) === 'function';\r\n}\r\n\r\nexport function isString (obj) {\r\n    return toType(obj) === 'string';\r\n}\r\n\r\nexport function isObject (obj) {\r\n    return toType(obj) === 'object';\r\n}\r\n\r\nexport function isNumber (obj) {\r\n    return toType(obj) === 'number';\r\n}\r\n\r\nexport function isBoolean (obj) {\r\n    return toType(obj) === 'boolean';\r\n}\r\n\r\nexport function partial (fn, ...argsToApply) {\r\n    return function (...args) {\r\n        return fn.apply(this, argsToApply.concat(args));\r\n    };\r\n}\r\n\r\nexport function isIterable (maybeIter) {\r\n    if (!maybeIter || typeof maybeIter !== 'object') return false;\r\n    return ('length' in maybeIter || ('count' in maybeIter && isFunction(maybeIter.count)));\r\n}\r\n\r\nexport function iterableLength (iter) {\r\n    if (!isIterable(iter)) return 0;\r\n    if (isFunction(iter.count)) return iter.count();\r\n    return iter.length;\r\n}\r\n\r\nexport function unwrapImmutable (maybeImmutable) {\r\n    if (!maybeImmutable) return maybeImmutable;\r\n    if (isFunction(maybeImmutable.toJS)) return maybeImmutable.toJS();\r\n    return maybeImmutable;\r\n}\r\n\r\nexport function get (maybeImmutable, propOrIndex) {\r\n    if (!maybeImmutable || typeof maybeImmutable !== 'object') return maybeImmutable;\r\n    if (isFunction(maybeImmutable.get)) return maybeImmutable.get(propOrIndex);\r\n    return maybeImmutable[propOrIndex];\r\n}\r\n\r\nexport function hasProp (o, p) {\r\n    return Object.prototype.hasOwnProperty.call(o, p);\r\n}\r\n\r\n/**\r\n * Ensures that the given argument can be called as a function:\r\n *\r\n *    var definitelyFn = asCallable(maybeFn);\r\n *    definitelyFn(); // calling maybeFn would throw if maybeFn is not a function\r\n *\r\n * @param {*} maybeFn - value to ensure is callable\r\n * @param {string|function} instead - function to call if maybeFn is not callable, OR the string 'identity' to return the value of maybeFn\r\n * @returns {function}\r\n */\r\nexport function asCallable (maybeFn, instead) {\r\n    if (isFunction(maybeFn)) return maybeFn;\r\n    if (isFunction(instead)) return partial(instead, maybeFn);\r\n    if (instead === 'identity') return partial(identity, maybeFn);\r\n    return noop;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/util.js\n **/","import Imm from 'immutable';\r\nimport Validator from './Validator';\r\n\r\nclass ValidatorWrapper {\r\n    constructor (chooseValidator) {\r\n        this.getValidator = chooseValidator;\r\n    }\r\n\r\n    validate (dataToValidate) {\r\n        const v = this.getValidator(dataToValidate);\r\n\r\n        if (!Validator.isInstance(v)) {\r\n            return Imm.Map({ isValid: true });\r\n        }\r\n\r\n        return v.validate(dataToValidate);\r\n    }\r\n}\r\n\r\nexport default ValidatorWrapper;\n\n\n/** WEBPACK FOOTER **\n ** ./src/ValidatorWrapper.js\n **/","import { asCallable, isString } from './util';\r\n\r\nexport default function rule (predicate, message) {\r\n    predicate = asCallable(predicate, () => true);\r\n    message = asCallable(message, (msg) => {\r\n        return (isString(msg)) ? msg : '';\r\n    });\r\n\r\n    return (val) => {\r\n        const isValid = predicate(val);\r\n        const msg = message(val);\r\n        return { isValid, message: msg };\r\n    };\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/rule.js\n **/","import { isString, isNumber, isBoolean } from './util';\r\n\r\nexport function required (val) {\r\n    if (!isString(val) && !isNumber(val) && !isBoolean(val)) return false;\r\n\r\n    if (isString(val)) {\r\n        return val.trim().length > 0;\r\n    }\r\n\r\n    if (isNaN(val)) return false;\r\n\r\n    return true;\r\n}\r\n\r\nexport function minLength (min) {\r\n    return (val) => val.length >= min;\r\n}\r\n\r\nexport function maxLength (max) {\r\n    return (val) => val.length <= max;\r\n}\r\n\r\n// TODO: Curried functions\r\nexport function between (min, max) {\r\n    return (val) => {\r\n        const nVal = parseInt(val, 10);\r\n        return (nVal >= min && nVal <= max);\r\n    };\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/predicates.js\n **/"],"sourceRoot":""}