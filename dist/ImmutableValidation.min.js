!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("immutable")):"function"==typeof define&&define.amd?define(["immutable"],t):"object"==typeof exports?exports.ImmutableValidation=t(require("immutable")):e.ImmutableValidation=t(e.Immutable)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var u=n[r]={exports:{},id:r,loaded:!1};return e[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=u(i),o=n(4),s=r(o),l=n(5),c=u(l);t["default"]={Validator:a["default"],facts:s,rule:c["default"]},e.exports=t["default"]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=n(3),o=Object.prototype.hasOwnProperty,s=function(){function e(){r(this,e),this.ruleSets=[],this.validationState=new i.Map({isValid:!0,messages:new i.Map})}return u(e,[{key:"ruleFor",value:function(t,n){for(var r=arguments.length,u=Array(r>2?r-2:0),i=2;r>i;i++)u[i-2]=arguments[i];return 1===u.length&&e.isInstance(u[0])?this._addValidatorToRuleSets(t,n,u[0]):this._addRuleSetToRuleSets(t,n,u)}},{key:"_addValidatorToRuleSets",value:function(e,t,n){return this.validationState=this.validationState.setIn(["messages",e],new i.Map),this.ruleSets.push(function(r,u){var i=t(r,e),a=n.validate(i);return u.set(e,a)}),this}},{key:"_addRuleSetToRuleSets",value:function(e,t,n){var r=this;return this.validationState=this.validationState.setIn(["messages",e],new i.Set),this.ruleSets.push(function(u,i){return n.reduce(function(n,i){var a=n.get(e),o=t(u,e),s=r._runRule(i,o),l=s.isValid,c=s.message;return l?n.set(e,a["delete"](c)):n.set(e,a.add(c))},i)}),this}},{key:"_runRule",value:function(e,t){var n=e(t);if(!o.call(n,"isValid")||!o.call(n,"message"))throw new Error("Rules must return a result with the properties `isValid` and `message`. Use ImmutableValidation.rule()");return n}},{key:"validate",value:function(e){var t=this.ruleSets.reduce(function(t,n){return n(e,t)},this.validationState.get("messages")),n=t.every(function(e){return!e.count()});return this.validationState=this.validationState.withMutations(function(e){return e.set("isValid",n).set("messages",t)}),this.validationState}}],[{key:"isInstance",value:function(e){return a.isFunction(e.validate)&&a.isFunction(e.ruleFor)}}]),e}();t["default"]=s,e.exports=t["default"]},function(t,n){t.exports=e},function(e,t){"use strict";function n(e){return e}function r(){return void 0}function u(e){return null===e?"null":void 0===e?"undefined":{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function i(e){return"function"===u(e)}function a(e){return"string"===u(e)}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),u=0;t>u;u++)r[u]=arguments[u];return e.apply(this,n.concat(r))}}function s(e,t){return i(e)?e:i(t)?o(t,e):"identity"===t?o(n,e):r}Object.defineProperty(t,"__esModule",{value:!0}),t.identity=n,t.noop=r,t.toType=u,t.isFunction=i,t.isString=a,t.partial=o,t.asCallable=s},function(e,t){"use strict";function n(e){return!!e}function r(e){return function(t){return t.length>=e}}function u(e){return function(t){return t.length<=e}}function i(e,t){return function(n){var r=parseInt(n,10);return r>=e&&t>=r}}Object.defineProperty(t,"__esModule",{value:!0}),t.required=n,t.minLength=r,t.maxLength=u,t.between=i},function(e,t,n){"use strict";function r(e,t){return e=u.asCallable(e,function(){return!0}),t=u.asCallable(t,function(e){return u.isString(e)?e:""}),function(n){var r=e(n),u=t(n);return{isValid:r,message:u}}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var u=n(3);e.exports=t["default"]}])});